(function(e){function t(t){for(var i,c,r=t[0],a=t[1],u=t[2],o=0,p=[];o<r.length;o++)c=r[o],Object.prototype.hasOwnProperty.call(n,c)&&n[c]&&p.push(n[c][0]),n[c]=0;for(i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i]);h&&h(t);while(p.length)p.shift()();return s.push.apply(s,u||[]),l()}function l(){for(var e,t=0;t<s.length;t++){for(var l=s[t],i=!0,r=1;r<l.length;r++){var a=l[r];0!==n[a]&&(i=!1)}i&&(s.splice(t--,1),e=c(c.s=l[0]))}return e}var i={},n={app:0},s=[];function c(t){if(i[t])return i[t].exports;var l=i[t]={i:t,l:!1,exports:{}};return e[t].call(l.exports,l,l.exports,c),l.l=!0,l.exports}c.m=e,c.c=i,c.d=function(e,t,l){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:l})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(c.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)c.d(l,i,function(t){return e[t]}.bind(null,i));return l},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],a=r.push.bind(r);r.push=t,r=r.slice();for(var u=0;u<r.length;u++)t(r[u]);var h=a;s.push([0,"chunk-vendors"]),l()})({0:function(e,t,l){e.exports=l("56d7")},"0907":function(e,t,l){},"291b":function(e,t,l){"use strict";l("9ac2")},4285:function(e,t,l){"use strict";l("0907")},"56d7":function(e,t,l){"use strict";l.r(t);var i=l("7a23");function n(e,t,l,n,s,c){const r=Object(i["i"])("painter");return Object(i["g"])(),Object(i["c"])(r)}const s=Object(i["e"])("span",{class:"title"},"Bitree Painter",-1),c={class:"container"},r={class:"above-container"},a={class:"border"},u={class:"option-container"},h={style:{height:"260px",width:"100%","overflow-x":"hidden"}},o={class:"item-line"},p=Object(i["e"])("td",{class:"item-name"},"缩放",-1),b=Object(i["e"])("tr",{class:"hr"},null,-1),v={class:"item-line"},f=Object(i["e"])("td",{class:"item-name"},"字号",-1),d=Object(i["e"])("tr",{class:"hr"},null,-1),m={class:"item-line"},g=Object(i["e"])("td",{class:"item-name"},"间距",-1),O=Object(i["e"])("tr",{class:"hr"},null,-1),j={class:"item-line"},x=Object(i["e"])("td",{class:"item-name"},"层高",-1),y=Object(i["e"])("tr",{class:"hr"},null,-1),S={class:"item-line"},L=Object(i["e"])("td",{class:"item-name"},"线宽",-1),I=Object(i["e"])("tr",{class:"hr"},null,-1),w={class:"item-line"},k=Object(i["e"])("td",{class:"item-name"},"水平",-1),X=Object(i["e"])("tr",{class:"hr"},null,-1),C={class:"item-line"},P=Object(i["e"])("td",{class:"item-name"},"垂直",-1),N=Object(i["e"])("tr",{class:"hr"},null,-1),T=Object(i["e"])("hr",{style:{margin:"0",border:"0.5pt solid lightgrey"}},null,-1),E=Object(i["e"])("span",{style:{"margin-left":"40%"}},"保存",-1),M=[E],B={class:"input-container"},Y=["innerHTML"],A={class:"style-container"},F={class:"style-list"},z=["onClick"],D={style:{"padding-left":"5%"}},W=Object(i["e"])("tr",{class:"hr"},null,-1),_=Object(i["e"])("canvas",{width:"1020",height:"400"},null,-1);function H(e,t,l,n,E,H){return Object(i["g"])(),Object(i["d"])("div",null,[s,Object(i["e"])("div",c,[Object(i["e"])("div",r,[Object(i["e"])("div",a,[Object(i["e"])("div",u,[Object(i["e"])("div",h,[Object(i["e"])("table",null,[Object(i["e"])("tr",o,[p,Object(i["e"])("td",null,[Object(i["e"])("input",{id:"scale",type:"range",value:"2",max:"3",min:"1",step:"0.1",onInput:t[0]||(t[0]=e=>H.SetScale())},null,32)])]),b,Object(i["e"])("tr",v,[f,Object(i["e"])("td",null,[Object(i["e"])("input",{id:"font-size",type:"range",value:"20",max:"30",min:"10",onInput:t[1]||(t[1]=e=>H.SetFontSize())},null,32)])]),d,Object(i["e"])("tr",m,[g,Object(i["e"])("td",null,[Object(i["e"])("input",{id:"space",type:"range",value:"40",max:"50",min:"30",onInput:t[2]||(t[2]=e=>H.SetSpace())},null,32)])]),O,Object(i["e"])("tr",j,[x,Object(i["e"])("td",null,[Object(i["e"])("input",{id:"level-space",type:"range",value:"50",max:"70",min:"30",onInput:t[3]||(t[3]=e=>H.SetlevelSpace())},null,32)])]),y,Object(i["e"])("tr",S,[L,Object(i["e"])("td",null,[Object(i["e"])("input",{id:"linewidth",type:"range",value:"2",max:"3",min:"1",step:"0.01",onInput:t[4]||(t[4]=e=>H.SetLineWidth())},null,32)])]),I,Object(i["e"])("tr",w,[k,Object(i["e"])("td",null,[Object(i["e"])("input",{id:"movex",type:"range",value:"200",max:"1000",min:"0",onInput:t[5]||(t[5]=e=>H.SetX())},null,32)])]),X,Object(i["e"])("tr",C,[P,Object(i["e"])("td",null,[Object(i["e"])("input",{id:"movey",type:"range",value:"50",max:"400",min:"0",onInput:t[6]||(t[6]=e=>H.SetY())},null,32)])]),N])]),T,Object(i["e"])("div",{class:Object(i["f"])({"table-button":!0,active:this.buttonActive}),onMouseover:t[7]||(t[7]=e=>{this.buttonActive=!0}),onMouseleave:t[8]||(t[8]=e=>this.buttonActive=!1)},M,34)]),Object(i["e"])("div",B,[Object(i["e"])("div",{class:"input-box",contenteditable:"true",onInput:t[9]||(t[9]=e=>this.Input())},"4b[2r[1b][3b]][5b]",32),Object(i["e"])("div",{class:"output-box",innerHTML:H.OutPut},null,8,Y)]),Object(i["e"])("div",A,[Object(i["e"])("div",F,[Object(i["e"])("table",null,[(Object(i["g"])(!0),Object(i["d"])(i["a"],null,Object(i["h"])(this.style,(e,t)=>(Object(i["g"])(),Object(i["d"])("tbody",{key:t},[Object(i["e"])("tr",{class:Object(i["f"])({"style-item":!0,active:e.active}),onClick:e=>H.ChangeStyle(t)},[Object(i["e"])("span",D,Object(i["j"])(e.name),1)],10,z),W]))),128))])])])])]),_])])}var J={data:function(){return{style:[{name:"红黑树",font:20,textlength:2,active:!0},{name:"纯色树",font:20,textlength:2,active:!1}],scale:2,fontSize:20,space:40,lineWidth:2,levelSpace:50,x:200,y:50,code:"",message:[],curStyle:0,buttonActive:!1,Level:null,ctx:null}},mounted:function(){this.Input()},methods:{SetScale:function(){this.scale=document.getElementById("scale").value,this.Input()},SetFontSize:function(){this.fontSize=document.getElementById("font-size").value,this.Input()},SetSpace:function(){this.space=document.getElementById("space").value,this.Input()},SetLineWidth:function(){this.lineWidth=document.getElementById("linewidth").value,this.Input()},SetlevelSpace:function(){this.levelSpace=document.getElementById("level-space").value,this.Input()},SetInput:function(){this.code=document.getElementsByClassName("input-box")[0].innerHTML,this.Input()},SetX:function(){this.x=document.getElementById("movex").value,this.Input()},SetY:function(){this.y=document.getElementById("movey").value,this.Input()},ChangeStyle:function(e){this.style[this.curStyle].active=!1,this.style[e].active=!0,this.curStyle=e},Node(e){if(e=e.replace(/&nbsp;|^\s*|\s*$/g,""),!e)return this.message+="不合法的根节点值: null;<br>",null;var t=e[e.length-1];return-1==["w","r","b"].indexOf(t)?t="w":e=e.substring(0,e.length-1),e.length>2?(this.message+="过长的节点值: "+e+";<br>",null):{value:e,FirstChild:null,NextSibling:null,posX:0,posY:0,color:t}},Input:function(){this.message="",this.code=document.getElementsByClassName("input-box")[0].innerHTML,this.Draw()},Explain:function(e){var t=e.indexOf("["),l=null,i=[];if(-1==t){if(e=e.split(" "),l=this.Node(e.splice(0,1)[0]),null==l)return null;if("0h"==l.value&&0!=e.length)return this.message+="不合法的根节点: 隐藏节点;<br>",null;for(var n in e)i.push(this.Node(n))}else{if(0==t)return this.message+="不合法的表达: '[';<br>",null;if(l=this.Node(e.substring(0,t)),null==l)return null;if("0h"==l.value)return this.message+="不合法的根节点: 隐藏节点;<br>",null;for(var s=0,c=t;c<e.length;c++){if("["==e[c]&&s++,"]"==e[c]&&s--,s<0)return this.message+="未闭合的解析式: "+e.substring(t,c)+";<br>",null;if(0==s){if(t==c-1)return void(this.message+="不合法的节点值: null;<br>");i.push(this.Explain(e.substring(t+1,c))),t=c+1}}if(0!=s)return this.message+="未闭合的解析式: "+e+";<br>",null}for(var r=null,a=0;a<i.length;a++)0==a?(l.FirstChild=i[a],r=l.FirstChild):(r.NextSibling=i[a],r=r.NextSibling);return l},CalcPos:function(e){this.Dfs(e,0),this.Level[this.Level.length-1][0].posX=0,this.Level[this.Level.length-1][0].posY=this.Level.length-1;for(var t=0,l=[],i=this.Level.length-1;i>=1;i--){for(var n=t-1;n>=0;n--)this.Level[i][n].posY=i,this.Level[i][n].posX=this.Level[i][n+1].posX-1;var s=1;for(n=t+1;n<this.Level[i].length;n++)this.Level[i][n].posY=i,null==this.Level[i][n].FirstChild?this.Level[i][n].posX=this.Level[i][n-1].posX+1:(this.Level[i][n].posX=this.Level[i][n-1].posX+Math.max(1,l[s]-l[s-1]),s++);var c=this.Level[i][0],r=this.Level[i][0].posX,a=1;l=1==this.Level[i].length?[this.Level[i][0].posX]:[];for(n=1;n<this.Level[i].length;n++)c.NextSibling==this.Level[i][n]?(a++,r+=this.Level[i][n].posX):(l.push(r/a),r=this.Level[i][n].posX,a=1),c=this.Level[i][n];l.push(r/a);for(n=0;n<this.Level[i-1].length;n++)if(null!=this.Level[i-1][n].FirstChild){this.Level[i-1][n].posY=i-1,this.Level[i-1][n].posX=l[0],t=n;break}}},Dfs(e,t){t>=this.Level.length&&this.Level.push.apply(this.Level,Array(t-this.Level.length+1).fill(Array(0))),this.Level[t].push(e);for(var l=e.FirstChild;null!=l;l=l.NextSibling)this.Dfs(l,t+1)},DrawTree(e){if("0h"!=e.value){this.ctx.beginPath(),this.ctx.lineWidth=this.lineWidth;var t=this.fontSize/1.5;switch(this.ctx.arc(e.posX*this.space,e.posY*this.levelSpace,t,0,2*Math.PI,!0),e.color){case"r":this.ctx.strokeStyle="#ff0000",this.ctx.stroke(),this.ctx.fillStyle="#ff0000",this.ctx.fill(),this.ctx.fillStyle="#ffffff";break;case"b":this.ctx.strokeStyle="#000000",this.ctx.stroke(),this.ctx.fillStyle="#000000",this.ctx.fill(),this.ctx.fillStyle="#ffffff";break;case"w":this.ctx.strokeStyle="#000000",this.ctx.stroke(),this.ctx.fillStyle="#ffffff",this.ctx.fill(),this.ctx.fillStyle="#000000";break}this.ctx.font="bold "+String(this.fontSize)+"px Times New Roman",this.ctx.fillText(e.value,e.posX*this.space-.35*t*e.value.length,e.posY*this.levelSpace+.35*t);for(var l=e.FirstChild;null!=l;l=l.NextSibling)"0h"!=l.value&&(this.ctx.beginPath(),this.ctx.lineWidth=this.lineWidth/2,this.ctx.lineJoin="round","r"==e.color?this.ctx.strokeStyle="#ff0000":this.ctx.strokeStyle="#000000",this.ctx.moveTo(e.posX*this.space,e.posY*this.levelSpace+t),this.ctx.lineTo(l.posX*this.space,l.posY*this.levelSpace-t),this.ctx.stroke(),this.DrawTree(l))}},Draw(){var e=document.getElementsByTagName("canvas")[0];this.ctx=e.getContext("2d"),e.height=e.height,this.ctx.save(),this.ctx.translate(this.x,this.y),this.ctx.scale(this.scale,this.scale),this.Level=Array(1).fill(Array(0));var t=this.Explain(this.code);t&&(this.CalcPos(t),this.DrawTree(t)),this.ctx.restore()}},computed:{CalcRadius:function(){var e=this.font+2;return e},OutPut:function(){var e=this.message;return""==e&&(e="未发现问题;<br>"),e}}};l("4285");J.render=H;var R=J,$={name:"App",components:{Painter:R}};l("291b");$.render=n;var q=$;Object(i["b"])(q).mount("#app")},"9ac2":function(e,t,l){}});
//# sourceMappingURL=app.2565782a.js.map