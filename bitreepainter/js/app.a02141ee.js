(function(e){function t(t){for(var l,c,r=t[0],a=t[1],h=t[2],u=0,p=[];u<r.length;u++)c=r[u],Object.prototype.hasOwnProperty.call(n,c)&&n[c]&&p.push(n[c][0]),n[c]=0;for(l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l]);o&&o(t);while(p.length)p.shift()();return s.push.apply(s,h||[]),i()}function i(){for(var e,t=0;t<s.length;t++){for(var i=s[t],l=!0,r=1;r<i.length;r++){var a=i[r];0!==n[a]&&(l=!1)}l&&(s.splice(t--,1),e=c(c.s=i[0]))}return e}var l={},n={app:0},s=[];function c(t){if(l[t])return l[t].exports;var i=l[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,c),i.l=!0,i.exports}c.m=e,c.c=l,c.d=function(e,t,i){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(c.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)c.d(i,l,function(t){return e[t]}.bind(null,l));return i},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],a=r.push.bind(r);r.push=t,r=r.slice();for(var h=0;h<r.length;h++)t(r[h]);var o=a;s.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"291b":function(e,t,i){"use strict";i("9ac2")},"56d7":function(e,t,i){"use strict";i.r(t);var l=i("7a23");function n(e,t,i,n,s,c){const r=Object(l["i"])("painter");return Object(l["g"])(),Object(l["c"])(r)}const s=Object(l["e"])("span",{class:"title"},"Bitree Painter",-1),c={class:"container"},r={class:"above-container"},a={class:"border"},h={class:"option-container"},o={style:{height:"260px",width:"100%","overflow-x":"hidden"}},u={class:"item-line"},p=Object(l["e"])("td",{class:"item-name"},"缩放",-1),f=Object(l["e"])("tr",{class:"hr"},null,-1),b={class:"item-line"},v=Object(l["e"])("td",{class:"item-name"},"字号",-1),d=Object(l["e"])("tr",{class:"hr"},null,-1),g={class:"item-line"},m=Object(l["e"])("td",{class:"item-name"},"间距",-1),O=Object(l["e"])("tr",{class:"hr"},null,-1),j={class:"item-line"},x=Object(l["e"])("td",{class:"item-name"},"层高",-1),y=Object(l["e"])("tr",{class:"hr"},null,-1),S={class:"item-line"},L=Object(l["e"])("td",{class:"item-name"},"线宽",-1),w=Object(l["e"])("tr",{class:"hr"},null,-1),I=Object(l["e"])("hr",{style:{margin:"0",border:"0.5pt solid lightgrey"}},null,-1),k=Object(l["e"])("span",{style:{"margin-left":"40%"}},"保存",-1),C=[k],X={class:"input-container"},P=["innerHTML"],N={class:"style-container"},T={class:"style-list"},M=["onClick"],E={style:{"padding-left":"5%"}},A=Object(l["e"])("tr",{class:"hr"},null,-1),B=Object(l["e"])("canvas",{width:"1020",height:"400"},null,-1);function F(e,t,i,n,k,F){return Object(l["g"])(),Object(l["d"])("div",null,[s,Object(l["e"])("div",c,[Object(l["e"])("div",r,[Object(l["e"])("div",a,[Object(l["e"])("div",h,[Object(l["e"])("div",o,[Object(l["e"])("table",null,[Object(l["e"])("tr",u,[p,Object(l["e"])("td",null,[Object(l["e"])("input",{id:"scale",type:"range",value:"2",max:"3",min:"1",step:"0.1",onInput:t[0]||(t[0]=e=>F.SetScale())},null,32)])]),f,Object(l["e"])("tr",b,[v,Object(l["e"])("td",null,[Object(l["e"])("input",{id:"font-size",type:"range",value:"20",max:"30",min:"10",onInput:t[1]||(t[1]=e=>F.SetFontSize())},null,32)])]),d,Object(l["e"])("tr",g,[m,Object(l["e"])("td",null,[Object(l["e"])("input",{id:"space",type:"range",value:"40",max:"50",min:"30",onInput:t[2]||(t[2]=e=>F.SetSpace())},null,32)])]),O,Object(l["e"])("tr",j,[x,Object(l["e"])("td",null,[Object(l["e"])("input",{id:"level-space",type:"range",value:"50",max:"70",min:"30",onInput:t[3]||(t[3]=e=>F.SetlevelSpace())},null,32)])]),y,Object(l["e"])("tr",S,[L,Object(l["e"])("td",null,[Object(l["e"])("input",{id:"linewidth",type:"range",value:"2",max:"3",min:"1",step:"0.01",onInput:t[4]||(t[4]=e=>F.SetLineWidth())},null,32)])]),w])]),I,Object(l["e"])("div",{class:Object(l["f"])({"table-button":!0,active:this.buttonActive}),onMouseover:t[5]||(t[5]=e=>{this.buttonActive=!0}),onMouseleave:t[6]||(t[6]=e=>this.buttonActive=!1)},C,34)]),Object(l["e"])("div",X,[Object(l["e"])("div",{class:"input-box",contenteditable:"true",onInput:t[7]||(t[7]=e=>this.Input())},"4b[2r[1b][3b]][5b]",32),Object(l["e"])("div",{class:"output-box",innerHTML:F.OutPut},null,8,P)]),Object(l["e"])("div",N,[Object(l["e"])("div",T,[Object(l["e"])("table",null,[(Object(l["g"])(!0),Object(l["d"])(l["a"],null,Object(l["h"])(this.style,(e,t)=>(Object(l["g"])(),Object(l["d"])("tbody",{key:t},[Object(l["e"])("tr",{class:Object(l["f"])({"style-item":!0,active:e.active}),onClick:e=>F.ChangeStyle(t)},[Object(l["e"])("span",E,Object(l["j"])(e.name),1)],10,M),A]))),128))])])])])]),B])])}var Y={data:function(){return{style:[{name:"红黑树",font:20,textlength:2,active:!0},{name:"纯色树",font:20,textlength:2,active:!1}],scale:2,fontSize:20,space:40,lineWidth:2,levelSpace:50,code:"",message:[],curStyle:0,buttonActive:!1,Level:null,ctx:null}},mounted:function(){this.Input()},methods:{SetScale:function(){this.scale=document.getElementById("scale").value,this.Input()},SetFontSize:function(){this.fontSize=document.getElementById("font-size").value,this.Input()},SetSpace:function(){this.space=document.getElementById("space").value,this.Input()},SetLineWidth:function(){this.lineWidth=document.getElementById("linewidth").value,this.Input()},SetlevelSpace:function(){this.levelSpace=document.getElementById("level-space").value,this.Input()},SetInput:function(){this.code=document.getElementsByClassName("input-box")[0].innerHTML,this.Input()},ChangeStyle:function(e){this.style[this.curStyle].active=!1,this.style[e].active=!0,this.curStyle=e},Node(e){if(e=e.replace(/&nbsp;|^\s*|\s*$/g,""),!e)return this.message+="不合法的根节点值: null;<br>",null;var t=e[e.length-1];return-1==["w","r","b"].indexOf(t)?t="w":e=e.substring(0,e.length-1),e.length>2?(this.message+="过长的节点值: "+e+";<br>",null):{value:e,FirstChild:null,NextSibling:null,posX:0,posY:0,color:t}},Input:function(){this.message="",this.code=document.getElementsByClassName("input-box")[0].innerHTML,this.Draw()},Explain:function(e){var t=e.indexOf("["),i=null,l=[];if(-1==t){if(e=e.split(" "),i=this.Node(e.splice(0,1)[0]),null==i)return null;if("0h"==i.value&&0!=e.length)return this.message+="不合法的根节点: 隐藏节点;<br>",null;for(var n in e)l.push(this.Node(n))}else{if(0==t)return this.message+="不合法的表达: '[';<br>",null;if(i=this.Node(e.substring(0,t)),null==i)return null;if("0h"==i.value)return this.message+="不合法的根节点: 隐藏节点;<br>",null;for(var s=0,c=t;c<e.length;c++){if("["==e[c]&&s++,"]"==e[c]&&s--,s<0)return this.message+="未闭合的解析式: "+e.substring(t,c)+";<br>",null;if(0==s){if(t==c-1)return void(this.message+="不合法的节点值: null;<br>");l.push(this.Explain(e.substring(t+1,c))),t=c+1}}if(0!=s)return this.message+="未闭合的解析式: "+e+";<br>",null}for(var r=null,a=0;a<l.length;a++)0==a?(i.FirstChild=l[a],r=i.FirstChild):(r.NextSibling=l[a],r=r.NextSibling);return i},CalcPos:function(e){this.Dfs(e,0),this.Level[this.Level.length-1][0].posX=0,this.Level[this.Level.length-1][0].posY=this.Level.length-1;for(var t=0,i=[],l=this.Level.length-1;l>=1;l--){for(var n=t-1;n>=0;n--)this.Level[l][n].posY=l,this.Level[l][n].posX=this.Level[l][n+1].posX-1;for(n=t+1;n<this.Level[l].length;n++)this.Level[l][n].posY=l,null==this.Level[l][n].FirstChild?this.Level[l][n].posX=this.Level[l][n-1].posX+1:this.Level[l][n].posX=this.Level[l][n-1].posX+Math.max(1,i[n]-i[n-1]);var s=this.Level[l][0],c=this.Level[l][0].posX,r=1;i=1==this.Level[l].length?[this.Level[l][0].posX]:[];for(n=1;n<this.Level[l].length;n++)s.NextSibling==this.Level[l][n]?(r++,c+=this.Level[l][n].posX):(i.push(c/r),c=this.Level[l][n].posX,r=1),s=this.Level[l][n];i.push(c/r);for(n=0;n<this.Level[l-1].length;n++)if(null!=this.Level[l-1][n].FirstChild){this.Level[l-1][n].posY=l-1,this.Level[l-1][n].posX=i[0],t=n;break}}},Dfs(e,t){t>=this.Level.length&&this.Level.push.apply(this.Level,Array(t-this.Level.length+1).fill(Array(0))),this.Level[t].push(e);for(var i=e.FirstChild;null!=i;i=i.NextSibling)this.Dfs(i,t+1)},DrawTree(e){if("0h"!=e.value){this.ctx.beginPath(),this.ctx.lineWidth=this.lineWidth;var t=this.fontSize/1.5;switch(this.ctx.arc(e.posX*this.space,e.posY*this.levelSpace,t,0,2*Math.PI,!0),e.color){case"r":this.ctx.strokeStyle="#ff0000",this.ctx.stroke(),this.ctx.fillStyle="#ff0000",this.ctx.fill(),this.ctx.fillStyle="#ffffff";break;case"b":this.ctx.strokeStyle="#000000",this.ctx.stroke(),this.ctx.fillStyle="#000000",this.ctx.fill(),this.ctx.fillStyle="#ffffff";break;case"w":this.ctx.strokeStyle="#000000",this.ctx.stroke(),this.ctx.fillStyle="#ffffff",this.ctx.fill(),this.ctx.fillStyle="#000000";break}this.ctx.font="bold "+String(this.fontSize)+"px Times New Roman",this.ctx.fillText(e.value,e.posX*this.space-.35*t*e.value.length,e.posY*this.levelSpace+.35*t);for(var i=e.FirstChild;null!=i;i=i.NextSibling)"0h"!=i.value&&(this.ctx.beginPath(),this.ctx.lineWidth=this.lineWidth/2,this.ctx.lineJoin="round","r"==e.color?this.ctx.strokeStyle="#ff0000":this.ctx.strokeStyle="#000000",this.ctx.moveTo(e.posX*this.space,e.posY*this.levelSpace+t),this.ctx.lineTo(i.posX*this.space,i.posY*this.levelSpace-t),this.ctx.stroke(),this.DrawTree(i))}},Draw(){var e=document.getElementsByTagName("canvas")[0];this.ctx=e.getContext("2d"),e.height=e.height,this.ctx.translate(e.width/5,e.height/5),this.ctx.scale(this.scale,this.scale),this.Level=Array(1).fill(Array(0));var t=this.Explain(this.code);t&&(this.CalcPos(t),this.DrawTree(t))}},computed:{CalcRadius:function(){var e=this.font+2;return e},OutPut:function(){var e=this.message;return""==e&&(e="未发现问题;<br>"),e}}};i("b0c4");Y.render=F;var z=Y,D={name:"App",components:{Painter:z}};i("291b");D.render=n;var W=D;Object(l["b"])(W).mount("#app")},"9ac2":function(e,t,i){},b0c4:function(e,t,i){"use strict";i("b26f")},b26f:function(e,t,i){}});
//# sourceMappingURL=app.a02141ee.js.map