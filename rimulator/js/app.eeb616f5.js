(function(e){function t(t){for(var i,n,c=t[0],o=t[1],l=t[2],u=0,d=[];u<c.length;u++)n=c[u],Object.prototype.hasOwnProperty.call(a,n)&&a[n]&&d.push(a[n][0]),a[n]=0;for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i]);h&&h(t);while(d.length)d.shift()();return r.push.apply(r,l||[]),s()}function s(){for(var e,t=0;t<r.length;t++){for(var s=r[t],i=!0,c=1;c<s.length;c++){var o=s[c];0!==a[o]&&(i=!1)}i&&(r.splice(t--,1),e=n(n.s=s[0]))}return e}var i={},a={app:0},r=[];function n(t){if(i[t])return i[t].exports;var s=i[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=i,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(s,i,function(t){return e[t]}.bind(null,i));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var h=o;r.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"45bd":function(e,t,s){},"56d7":function(e,t,s){"use strict";s.r(t);var i=s("7a23");function a(e,t,s,a,r,n){const c=Object(i["k"])("Main");return Object(i["i"])(),Object(i["c"])(c)}const r={class:"container"},n={class:"reg-container"},c=Object(i["f"])("span",{class:"outline"},"Rimulator",-1),o=Object(i["f"])("hr",null,null,-1),l={class:"reg-scroller"},h={class:"reg-table"},u={style:{width:"100%"},class:"reg-line"},d={class:"reg-name"},b={class:"reg-value"},p=Object(i["f"])("tr",{class:"hr"},null,-1),f={class:"code-container"},g=Object(i["g"])('<table style="width:100%;"><tr class="title" style="width:100%;"><td style="width:25%;padding-left:5%;">机器码</td><td style="width:30%;padding-left:5%;">预处理</td><td style="width:40%;padding-left:5%;">Code</td></tr></table><hr>',2),v={class:"code-scroller"},C={class:"code-table"},j=["onClick","onContextmenu","onKeydown"],O={class:"code-linenumber"},k={class:"code-mc"},R={class:"code-pre"},m={class:"code-op"},y={key:0},x=Object(i["f"])("span",{class:"code-rs"},"--",-1),S=Object(i["f"])("span",{class:"code-rs"},"--",-1),M=Object(i["f"])("span",{class:"code-rs"},"--",-1),w=[x,S,M],I={key:1},E={key:0},L={class:"code-rs"},F={class:"code-rs"},D={class:"code-rs"},A={key:1},T={class:"code-rs"},B={class:"code-rs"},P={class:"code-rs"},N={key:2},H={class:"code-rs"},_={class:"code-rs"},q={key:3},z={class:"code-rs"},J={class:"code-rs"},K={key:4},U={class:"code-rs"},V={class:"code-rs"},W={class:"code-rs"},$=["innerHTML","contenteditable","id","onInput"],G=Object(i["f"])("tr",{class:"hr"},null,-1),Q=["innerHTML"],X=Object(i["f"])("button",{class:"nice-button"},"中断",-1),Y=Object(i["f"])("button",{class:"nice-button"},"链接",-1),Z={class:"stack-container"},ee={style:{"margin-left":"15%","margin-bottom":"3%"}},te=Object(i["f"])("hr",null,null,-1),se={key:0,class:"stack-switch"},ie={class:"stack-scroller"},ae={class:"stack-table"},re={class:"stack-address"},ne={class:"stack-value"},ce=Object(i["f"])("tr",{class:"hr"},null,-1),oe={key:1,class:"stack-switch"},le={class:"stack-scroller"},he={class:"stack-table"},ue={class:"stack-address"},de={class:"stack-value"},be=Object(i["f"])("tr",{class:"hr"},null,-1),pe={key:2,class:"stack-switch"},fe={class:"stack-scroller"},ge={class:"stack-table"},ve={class:"stack-address"},Ce={class:"stack-value"},je=Object(i["f"])("tr",{class:"hr"},null,-1);function Oe(e,t,s,a,x,S){return Object(i["i"])(),Object(i["e"])("div",r,[Object(i["f"])("div",n,[c,o,Object(i["f"])("div",l,[Object(i["f"])("table",h,[(Object(i["i"])(!0),Object(i["e"])(i["a"],null,Object(i["j"])(this.Reg,(e,t)=>(Object(i["i"])(),Object(i["e"])("tbody",{key:t},[Object(i["f"])("tr",u,[Object(i["f"])("td",d,Object(i["l"])(e.name),1),Object(i["f"])("td",b,Object(i["l"])(this.CalcRadix(e.value,this.RegRadix)),1)]),p]))),128))])])]),Object(i["f"])("div",f,[g,Object(i["f"])("div",v,[Object(i["f"])("table",C,[(Object(i["i"])(!0),Object(i["e"])(i["a"],null,Object(i["j"])(this.Code,(e,t)=>(Object(i["i"])(),Object(i["e"])("tbody",{key:t,class:Object(i["h"])({"code-line":!0,"breakpoint-run":e.run&&e.breakpoint,run:e.run,breakpoint:e.breakpoint,active:e.active}),onClick:Object(i["n"])(e=>S.MoveFocus(t),["left"]),onContextmenu:Object(i["n"])(e=>S.ChangeBP(t),["right"]),onKeydown:[Object(i["m"])(e=>S.NewCode(t),["enter"]),Object(i["m"])(e=>S.Up(t),["up"]),Object(i["m"])(e=>S.Down(t),["down"]),Object(i["m"])(e=>S.Remove(t),["delete"])]},[Object(i["f"])("tr",null,[Object(i["f"])("td",O,Object(i["l"])(S.CalcLinenumber(t)),1),Object(i["f"])("td",k,Object(i["l"])(S.CalcRadix(e.mc,16)),1),Object(i["f"])("td",R,[Object(i["f"])("span",m,Object(i["l"])(e.op),1),"E"==e.tag?(Object(i["i"])(),Object(i["e"])("span",y,w)):Object(i["d"])("",!0),"E"!=e.tag?(Object(i["i"])(),Object(i["e"])("span",I,["r"==this.Inst[e.op].type?(Object(i["i"])(),Object(i["e"])("span",E,[Object(i["f"])("span",L,Object(i["l"])(this.Reg[e.rd].name),1),Object(i["f"])("span",F,Object(i["l"])(this.Reg[e.rs1].name),1),Object(i["f"])("span",D,Object(i["l"])(this.Reg[e.rs2].name),1)])):Object(i["d"])("",!0),"i"==this.Inst[e.op].type?(Object(i["i"])(),Object(i["e"])("span",A,[Object(i["f"])("span",T,Object(i["l"])(this.Reg[e.rd].name),1),Object(i["f"])("span",B,Object(i["l"])(this.Reg[e.rs1].name),1),Object(i["f"])("span",P,Object(i["l"])(e.rs2),1)])):Object(i["d"])("",!0),"l"==this.Inst[e.op].type?(Object(i["i"])(),Object(i["e"])("span",N,[Object(i["f"])("span",H,Object(i["l"])(this.Reg[e.rd].name),1),Object(i["f"])("span",_,Object(i["l"])(e.rs2)+"("+Object(i["l"])(this.Reg[e.rs1].name)+")",1)])):Object(i["d"])("",!0),"s"==this.Inst[e.op].type?(Object(i["i"])(),Object(i["e"])("span",q,[Object(i["f"])("span",z,Object(i["l"])(this.Reg[e.rs2].name),1),Object(i["f"])("span",J,Object(i["l"])(e.rd)+"("+Object(i["l"])(this.Reg[e.rs1].name)+")",1)])):Object(i["d"])("",!0),"b"==this.Inst[e.op].type?(Object(i["i"])(),Object(i["e"])("span",K,[Object(i["f"])("span",U,Object(i["l"])(this.Reg[e.rs1].name),1),Object(i["f"])("span",V,Object(i["l"])(this.Reg[e.rs2].name),1),Object(i["f"])("span",W,Object(i["l"])(e.rd),1)])):Object(i["d"])("",!0)])):Object(i["d"])("",!0)]),Object(i["f"])("td",{innerHTML:e.or,class:"code-or",contenteditable:e.active,id:t,onInput:e=>S.Compile(t)},null,40,$)]),G],42,j))),128))])]),Object(i["f"])("div",{class:"code-out",innerHTML:S.Output},null,8,Q),Object(i["f"])("div",null,[Object(i["f"])("button",{class:"nice-button",onClick:t[0]||(t[0]=(...e)=>S.Reset&&S.Reset(...e))},"重置"),Object(i["f"])("button",{class:"nice-button",onClick:t[1]||(t[1]=(...e)=>S.Step&&S.Step(...e))},"单步"),X,Object(i["f"])("button",{class:Object(i["h"])(["nice-button",{"nice-button":!0,active:"machine"==this.ConsoleModel}]),onClick:t[2]||(t[2]=(...e)=>S.ShowMachine&&S.ShowMachine(...e))}," 译码 ",2),Object(i["f"])("button",{class:Object(i["h"])(["nice-button",{"nice-button":!0,active:"message"==this.ConsoleModel}]),onClick:t[3]||(t[3]=(...e)=>S.ShowMessage&&S.ShowMessage(...e))}," 消息 ",2),Object(i["f"])("button",{class:Object(i["h"])(["nice-button",{"nice-button":!0,active:"edit"==this.ConsoleModel}]),onClick:t[4]||(t[4]=(...e)=>S.Edit&&S.Edit(...e))}," 编辑 ",2),Y])]),Object(i["f"])("div",Z,[Object(i["f"])("div",ee,[Object(i["f"])("button",{class:Object(i["h"])({"nice-button":!0,active:"text"==this.DataModel}),onClick:t[5]||(t[5]=e=>this.DataModel="text")},"text",2),Object(i["f"])("button",{class:Object(i["h"])({"nice-button":!0,active:"data"==this.DataModel}),onClick:t[6]||(t[6]=e=>this.DataModel="data")},"data",2),Object(i["f"])("button",{class:Object(i["h"])({"nice-button":!0,active:"stack"==this.DataModel}),onClick:t[7]||(t[7]=e=>this.DataModel="stack")},"stack",2)]),te,"stack"==this.DataModel?(Object(i["i"])(),Object(i["e"])("div",se,[Object(i["f"])("div",ie,[Object(i["f"])("table",ae,[(Object(i["i"])(!0),Object(i["e"])(i["a"],null,Object(i["j"])(this.Stack,(e,t)=>(Object(i["i"])(),Object(i["e"])("tbody",{key:t,class:"stack-line"},[Object(i["f"])("tr",null,[Object(i["f"])("td",re,Object(i["l"])(this.CalcRadix(this.StackAddr(t),16)),1),Object(i["f"])("td",ne,Object(i["l"])(this.CalcRadix(e,this.StackRadix)),1)]),ce]))),128))])])])):Object(i["d"])("",!0),"data"==this.DataModel?(Object(i["i"])(),Object(i["e"])("div",oe,[Object(i["f"])("div",le,[Object(i["f"])("table",he,[(Object(i["i"])(!0),Object(i["e"])(i["a"],null,Object(i["j"])(this.Data,(e,t)=>(Object(i["i"])(),Object(i["e"])("tbody",{key:t,class:"stack-line"},[Object(i["f"])("tr",null,[Object(i["f"])("td",ue,Object(i["l"])(this.CalcRadix(this.DataAddr(t),16)),1),Object(i["f"])("td",de,Object(i["l"])(this.CalcRadix(e,this.StackRadix)),1)]),be]))),128))])])])):Object(i["d"])("",!0),"text"==this.DataModel?(Object(i["i"])(),Object(i["e"])("div",pe,[Object(i["f"])("div",fe,[Object(i["f"])("table",ge,[(Object(i["i"])(!0),Object(i["e"])(i["a"],null,Object(i["j"])(this.Code,(e,t)=>(Object(i["i"])(),Object(i["e"])("tbody",{key:t,class:"stack-line"},[Object(i["f"])("tr",null,[Object(i["f"])("td",ve,Object(i["l"])(this.CalcRadix(this.TextAddr(t),16)),1),Object(i["f"])("td",Ce,Object(i["l"])(this.CalcRadix(e.mc,this.StackRadix)),1)]),je]))),128))])])])):Object(i["d"])("",!0)])])}var ke={updated:function(){this.$nextTick((function(){null!=this.Focus&&document.getElementById(String(this.Focus)).focus()}))},data:function(){return{pc:-1,Reg:[{name:"zero",value:0},{name:"ra",value:0},{name:"sp",value:3221225456},{name:"gp",value:0},{name:"tp",value:0},{name:"t0",value:0},{name:"t1",value:0},{name:"t2",value:0},{name:"s0",value:0},{name:"s1",value:0},{name:"a0",value:0},{name:"a1",value:0},{name:"a2",value:0},{name:"a3",value:0},{name:"a4",value:0},{name:"a5",value:0},{name:"a6",value:0},{name:"a7",value:0},{name:"s2",value:0},{name:"s3",value:0},{name:"s4",value:0},{name:"s5",value:0},{name:"s6",value:0},{name:"s7",value:0},{name:"s8",value:0},{name:"s9",value:0},{name:"s10",value:0},{name:"s11",value:0},{name:"t3",value:0},{name:"t4",value:0},{name:"t5",value:0},{name:"t6",value:0},{name:"mtvec",value:0},{name:"mepc",value:0},{name:"mcause",value:0},{name:"mie",value:0},{name:"mip",value:0},{name:"mtval",value:0},{name:"mscratch",value:0},{name:"mstatus",value:0}],Focus:0,Code:[{or:"xxx:addi x1,x1,4",op:"addi",rd:1,rs1:1,rs2:4,mc:0,active:!0,run:!1,breakpoint:!1,tag:"I",Message:"无错误"},{or:"addi x1,x1,4",op:"addi",rd:1,rs1:1,rs2:4,mc:0,active:!1,run:!1,breakpoint:!1,tag:"I",Message:"无错误"},{or:"addi x1,x1,4",op:"addi",rd:1,rs1:1,rs2:4,mc:0,active:!1,run:!1,breakpoint:!1,tag:"I",Message:"无错误"},{or:"beq x1,x1,xxx",op:"addi",rd:1,rs1:1,rs2:4,mc:0,active:!1,run:!1,breakpoint:!1,tag:"I",Message:"无错误"},{or:"addi x1,x1,4",op:"addi",rd:1,rs1:1,rs2:4,mc:0,active:!1,run:!1,breakpoint:!1,tag:"I",Message:"无错误"}],Inst:{lui:{op7:"0110111",type:"u"},auipc:{op7:"0010111",type:"u"},jal:{op7:"1100111",fun3:"000",type:"j"},jalr:{op7:"1100111",fun3:"000",type:"jr"},beq:{op7:"1100011",fun3:"000",type:"b"},bne:{op7:"1100011",fun3:"001",type:"b"},blt:{op7:"1100011",fun3:"100",type:"b"},bge:{op7:"1100011",fun3:"101",type:"b"},bltu:{op7:"1100011",fun3:"110",type:"b"},bgeu:{op7:"1100011",fun3:"111",type:"b"},lb:{op7:"0000011",fun3:"000",type:"l"},lh:{op7:"0000011",fun3:"001",type:"l"},lw:{op7:"0000011",fun3:"010",type:"l"},lbu:{op7:"0000011",fun3:"100",type:"l"},lhu:{op7:"0000011",fun3:"101",type:"l"},sb:{op7:"0100011",fun3:"000",type:"s"},sh:{op7:"0100011",fun3:"001",type:"s"},sw:{op7:"0100011",fun3:"010",type:"s"},addi:{op7:"0010011",fun3:"000",type:"i"},slti:{op7:"0010011",fun3:"010",type:"i"},sltiu:{op7:"0010011",fun3:"011",type:"i"},xori:{op7:"0010011",fun3:"100",type:"i"},ori:{op7:"0010011",fun3:"110",type:"i"},andi:{op7:"0010011",fun3:"111",type:"i"},slli:{op7:"0010011",fun7:"00000000",fun3:"001",type:"i"},srli:{op7:"0010011",fun7:"00000000",fun3:"101",type:"i"},srai:{op7:"0010011",fun7:"01000000",fun3:"101",type:"i"},add:{op7:"0110011",fun7:"00000000",fun3:"000",type:"r"},sub:{op7:"0110011",fun7:"01000000",fun3:"000",type:"r"},sll:{op7:"0110011",fun7:"00000000",fun3:"001",type:"r"},slt:{op7:"0110011",fun7:"01000000",fun3:"010",type:"r"},sltu:{op7:"0110011",fun7:"00000000",fun3:"011",type:"r"},xor:{op7:"0110011",fun7:"00000000",fun3:"100",type:"r"},srl:{op7:"0110011",fun7:"00000000",fun3:"100",type:"r"},sra:{op7:"0110011",fun7:"00000000",fun3:"101",type:"r"},or:{op7:"0110011",fun7:"01000000",fun3:"101",type:"r"},and:{op7:"0110011",fun7:"00000000",fun3:"110",type:"r"},fence:{op7:"0001111",type:"f"},"fence.i":{op7:"0001111",type:"f"},ecall:{op7:"1110011",type:"e"},ebreak:{op7:"1110011",type:"e"},csrrw:{op7:"1110011",type:"c"},csrrs:{op7:"1110011",type:"c"},csrrc:{op7:"1110011",type:"c"},csrrwi:{op7:"1110011",type:"c"},cssrrsi:{op7:"1110011",type:"c"},csrrci:{op7:"1110011",type:"c"},"---":{type:"n"}},Label:{},Stack:[0,0,0],Data:[0,0,0],RegRadix:16,StackRadix:16,MCRadix:16,DataModel:"stack",ConsoleModel:"message"}},methods:{CalcLinenumber:function(e){var t=String(this.Code.length).length;return String(e).padStart(t,"0")},CalcRadix:function(e,t){if(16==t)return"-"==e?"------ ----":"0x"+("0000"+(e>>16&65535).toString(16)).slice(-4)+" "+("0000"+(65535&e).toString(16)).slice(-4)},Sext:function(e,t){var s=e;return e>>t-1&&(s=4294967295,s<<=t,s+=e),s},MoveFocus(e){for(var t=0;t<this.Code.length;t++)"E"!=this.Code[t].tag&&t!=this.Focus||this.Compile(t);null!=this.Focus&&(this.Code[this.Focus].active=!1,this.Code[this.Focus].or=document.getElementById(String(this.Focus)).innerHTML),null!=e&&(this.Code[e].active=!0),this.Focus=e},NewCode:function(e){var t=window.event;t.returnValue=!1;var s=window.getSelection().getRangeAt(0).endOffset;if(0!=s){for(var i in this.Code.splice(e+1,0,{or:"",op:"---",rs1:0,rs2:0,rd:0,mc:"-",active:!1,run:!1,breakpoint:!1}),Object.keys(this.Label))this.Label[i]>e&&(this.Label[i]+=1);this.MoveFocus(e+1)}else{for(var i in this.Code.splice(e,0,{or:"",op:"---",rs1:0,rs2:0,rd:0,mc:"-",active:!1,run:!1,breakpoint:!1}),document.getElementById(String(e)).innerHTML="",Object.keys(this.Label))this.Label[i]>=e&&(this.Label[i]+=1);this.MoveFocus(e)}},Remove:function(e){var t=window.event;if(8!=t.keyCode){if(t.returnValue=!1,e>=1?this.MoveFocus(e-1):e<this.Code.length-1?this.MoveFocus(e+1):this.Focus=null,-1!=Object.values(this.Label).indexOf(e))for(var s in Object.keys(this.Label))this.Label[s]==e?delete this.Label[s]:this.Label[s]>e&&(this.Label[s]-=1);this.Code.splice(e,1)}},Up:function(e){e>=1&&this.MoveFocus((e-1)%this.Code.length)},Down:function(e){this.MoveFocus((e+1)%this.Code.length)},ChangeBP:function(e){this.Code[e].breakpoint=!this.Code[e].breakpoint},CheckReg:function(e){var t={x0:"zero",x1:"ra",x2:"sp",x3:"gp",x4:"tp",x5:"t0",x6:"t1",x7:"t2",x8:"s0",x9:"s1",x10:"a0",x11:"a1",x12:"a2",x13:"a3",x14:"a4",x15:"a5",x16:"a6",x17:"a7",x18:"s2",x19:"s3",x20:"s4",x21:"s5",x22:"s6",x23:"s7",x24:"s8",x25:"s9",x26:"s10",x27:"s11",x28:"t3",x29:"t4",x30:"t5",x31:"t6"},s=e.toLowerCase();return-1==Object.values(t).indexOf(s)&&-1==Object.keys(t).indexOf(s)?null:(-1==Object.values(t).indexOf(s)&&(s=t[s]),Object.values(t).indexOf(s))},Compile:function(e){if(null==document.getElementById(String(e)))return!0;this.Code[e].Message="无错误",this.Code[e].tag="I",this.Code[e].mc=0,this.Code[e].op="---",this.Code[e].rs1=0,this.Code[e].rs2=0,this.Code[e].rd=0;var t=null,s=document.getElementById(String(e)).innerHTML;if(-1!=s.indexOf(":")){if(s=s.split(":"),s.length>2)return this.Code[e].Message="标签中含有非法字符: ':'",this.Code[e].tag="E",!1;if(-1!=Object.keys(this.Label).indexOf(s[0])&&this.Label[s[0]]!=e)return this.Code[e].Message="已存在的标签: "+s[0],this.Code[e].tag="E",!1;t=s[0],s=s[1]}if(s=s.split(/&nbsp|[^\w-]/).filter(Boolean),""==s)return this.Code[e].Message="空指令",this.Code[e].tag="E",!1;var i=s[0].toLowerCase();if(-1==Object.keys(this.Inst).indexOf(i))return this.Code[e].Message="不支持的指令"+s[0],this.Code[e].tag="E",!1;switch(this.Inst[i].type){case"r":if(4!=s.length)return this.Code[e].Message="R型指令参数个数为3, 当前参数个数"+String(s.length-1),this.Code[e].tag="E",!1;var a=this.CheckReg(s[1]);if(null==a)return this.Code[e].Message="不支持的寄存器名称: "+s[1],this.Code[e].tag="E",!1;var r=this.CheckReg(s[2]);if(null==r)return this.Code[e].Message="不支持的寄存器名称: "+s[2],this.Code[e].tag="E",!1;var n=this.CheckReg(s[3]);if(null==n)return this.Code[e].Message="不支持的寄存器名称: "+s[3],this.Code[e].tag="E",!1;for(var c=Array(32),o=0;o<7;o++)c[o]=this.Inst[i].fun7[o];for(o=0;o<5;o++)c[7+o]=("00000"+n.toString(2)).slice(-5)[o];for(o=0;o<5;o++)c[12+o]=("00000"+r.toString(2)).slice(-5)[o];for(o=0;o<3;o++)c[17+o]=this.Inst[i].fun3[o];for(o=0;o<5;o++)c[20+o]=("00000"+a.toString(2)).slice(-5)[o];for(o=0;o<7;o++)c[25+o]=this.Inst[i].op7[o];this.Code[e].mc=parseInt(c.join(""),2),this.Code[e].op=i,this.Code[e].rs1=r,this.Code[e].rs2=n,this.Code[e].rd=a;break;case"i":if(4!=s.length)return this.Code[e].Message="I型指令参数个数为3, 当前参数个数"+String(s.length-1),this.Code[e].tag="E",!1;a=this.CheckReg(s[1]);if(null==a)return this.Code[e].Message="不支持的寄存器名称: "+s[1],this.Code[e].tag="E",!1;r=this.CheckReg(s[2]);if(null==r)return this.Code[e].Message="不支持的寄存器名称: "+s[2],this.Code[e].tag="E",!1;var l=parseInt(s[3]);if(console.log(l),isNaN(l))return this.Code[e].Message="类型错误的立即数: "+s[3],this.Code[e].tag="E",!1;if(Math.abs(l)>2047||"s"==i[0]&&Math.abs(l)>15)return this.Code[e].Message="立即数越界,当前为: "+String(l),this.Code[e].tag="E",!1;for(c=Array(32),o=0;o<12;o++)c[o]=("000000000000"+l.toString(2)).slice(-12)[o];for(o=0;o<5;o++)c[12+o]=("00000"+r.toString(2)).slice(-5)[o];for(o=0;o<3;o++)c[17+o]=this.Inst[i].fun3[o];for(o=0;o<5;o++)c[20+o]=("00000"+a.toString(2)).slice(-5)[o];for(o=0;o<7;o++)c[25+o]=this.Inst[i].op7[o];this.Code[e].mc=parseInt(c.join(""),2),this.Code[e].op=i,this.Code[e].rs1=r,this.Code[e].rs2=l,this.Code[e].rd=a;break;case"l":if(4!=s.length)return this.Code[e].Message="L型指令参数个数为3, 当前参数个数"+String(s.length-1),this.Code[e].tag="E",!1;a=this.CheckReg(s[1]);if(null==a)return this.Code[e].Message="不支持的寄存器名称: "+s[1],this.Code[e].tag="E",!1;r=this.CheckReg(s[3]);if(null==r)return this.Code[e].Message="不支持的寄存器名称: "+s[3],this.Code[e].tag="E",!1;l=parseInt(s[2]);if(isNaN(l))return this.Code[e].Message="类型错误的立即数: "+s[2],this.Code[e].tag="E",!1;if(Math.abs(l)>2047)return this.Code[e].Message="立即数越界,当前为: "+String(l),this.Code[e].tag="E",!1;l&=4095;var h=this.Sext(l,12)+this.Reg[r].value;if(h>>>=2,h>65535)return this.Code[e].Message="不支持的堆地址: "+this.CalcRadix(h,16),this.Code[e].tag="E",!1;for(c=Array(32),o=0;o<12;o++)c[o]=("000000000000"+l.toString(2)).slice(-12)[o];for(o=0;o<5;o++)c[12+o]=("00000"+r.toString(2)).slice(-5)[o];for(o=0;o<3;o++)c[17+o]=this.Inst[i].fun3[o];for(o=0;o<5;o++)c[20+o]=("00000"+a.toString(2)).slice(-5)[o];for(o=0;o<7;o++)c[25+o]=this.Inst[i].op7[o];this.Code[e].mc=parseInt(c.join(""),2),this.Code[e].op=i,this.Code[e].rs1=r,this.Code[e].rs2=l,this.Code[e].rd=a;break;case"s":if(4!=s.length)return this.Code[e].Message="S型指令参数个数为3, 当前参数个数"+String(s.length-1),this.Code[e].tag="E",!1;n=this.CheckReg(s[1]);if(null==n)return this.Code[e].Message="不支持的寄存器名称: "+s[1],this.Code[e].tag="E",!1;r=this.CheckReg(s[3]);if(null==r)return this.Code[e].Message="不支持的寄存器名称: "+s[3],this.Code[e].tag="E",!1;l=parseInt(s[2]);if(isNaN(l))return this.Code[e].Message="类型错误的立即数: "+s[2],this.Code[e].tag="E",!1;if(Math.abs(l)>2047)return this.Code[e].Message="立即数越界,当前为: "+String(l),this.Code[e].tag="E",!1;l&=4095;h=this.Sext(l,7)+this.Reg[r].value;if(h>>>=2,h>65535)return this.Code[e].Message="不支持的堆地址: "+this.CalcRadix(h,16),this.Code[e].tag="E",!1;for(c=Array(32),o=0;o<7;o++)c[o]=("000000000000"+l.toString(2)).slice(-12)[5+o];for(o=0;o<5;o++)c[7+o]=("00000"+n.toString(2)).slice(-5)[o];for(o=0;o<5;o++)c[12+o]=("00000"+r.toString(2)).slice(-5)[o];for(o=0;o<3;o++)c[17+o]=this.Inst[i].fun3[o];for(o=0;o<5;o++)c[20+o]=("000000000000"+l.toString(2)).slice(-12)[o];for(o=0;o<7;o++)c[25+o]=this.Inst[i].op7[o];this.Code[e].mc=parseInt(c.join(""),2),this.Code[e].op=i,this.Code[e].rs1=r,this.Code[e].rs2=n,this.Code[e].rd=l;break;case"b":if(4!=s.length)return this.Code[e].Message="B型指令参数个数为3, 当前参数个数"+String(s.length-1),this.Code[e].tag="E",!1;n=this.CheckReg(s[1]);if(null==n)return this.Code[e].Message="不支持的寄存器名称: "+s[1],this.Code[e].tag="E",!1;r=this.CheckReg(s[2]);if(null==r)return this.Code[e].Message="不支持的寄存器名称: "+s[2],this.Code[e].tag="E",!1;if(-1==Object.keys(this.Label).indexOf(s[3]))return this.Code[e].Message="不匹配的标签: "+s[3],this.Code[e].tag="E",!1;var u=this.Label[s[3]];if(u-=e,Math.abs(u)>2047)return this.Code[e].Message="立即数越界,当前为: "+this.CalcRadix(u,16),this.Code[e].tag="E",!1;u>>>=0;var d=u.toString(2);for(c=Array(32).fill("0"),o=0;o<7;o++)c[o]=this.Inst[i].op7[o];c[7]=d[11];for(o=0;o<4;o++)c[7+o]=d[1+o];for(o=0;o<3;o++)c[12+o]=this.Inst[i].fun3[o];for(o=0;o<5;o++)c[15+o]=r.toString(2)[o];for(o=0;o<5;o++)c[20+o]=n.toString(2)[o];for(o=0;o<6;o++)c[25+o]=d[5+o];c[31]=d[12],this.Code[e].mc=parseInt(c.join(""),2),this.Code[e].op=i,this.Code[e].rs1=r,this.Code[e].rs2=n,this.Code[e].rd=u>>0;break}if(null!=t)if(-1==Object.keys(this.Label).indexOf(t))this.Label[t]=e;else for(var b in Object.keys(this.Label))if(this.Label[b]==e){delete Label[b],this.Label[t]=e;break}},StackIndex:function(e){var t=3221225456-e;return t>>>=2,t},StackAddr:function(e){var t=e<<2;return t=3221225456-t,t},TextAddr:function(e){var t=e<<2;return t+=65536,t},DataAddr:function(e){var t=e<<2;return t+=this.TextAddr(this.Code.length),t},RunCode:function(e){var t=this.Code[e];switch(this.Inst[t.op].type){case"r":if(!t.rd)break;switch(t.op){case"add":this.Reg[t.rd].value=this.Reg[t.rs1].value+this.Reg[t.rs2].value;break;case"sub":this.Reg[t.rd].value=this.Reg[t.rs1].value-this.Reg[t.rs2].value;break;case"sll":this.Reg[t.rd].value=this.Reg[t.rs1].value<<this.Reg[t.rs2].value;break;case"slt":this.Reg[t.rd].value=this.Reg[t.rs1].value<this.Reg[t.rs2].value?1:0;break;case"sltu":var s=this.Reg[t.rs1].value>>>0,i=this.Reg[t.rs2].value>>>0;this.Reg[t.rd].value=s<i?1:0;break;case"xor":this.Reg[t.rd].value=this.Reg[t.rs1].value^this.Reg[t.rs2].value;break;case"srl":this.Reg[t.rd].value=this.Reg[t.rs1].value>>>this.Reg[t.rs2].value;break;case"sra":this.Reg[t.rd].value=this.Reg[t.rs1].value>>this.Reg[t.rs2].value;break;case"or":this.Reg[t.rd].value=this.Reg[t.rs1].value|this.Reg[t.rs2].value;break;case"and":this.Reg[t.rd].value=this.Reg[t.rs1].value&this.Reg[t.rs2].value;break}break;case"i":if(!t.rd)break;var a=this.Sext(t.rs2,12);switch(t.op){case"addi":this.Reg[t.rd].value=this.Reg[t.rs1].value+a;break;case"slli":this.Reg[t.rd].value=this.Reg[t.rs1].value<<t.rs2;break;case"slti":this.Reg[t.rd].value=this.Reg[t.rs1].value<t.rs2?1:0;break;case"sltiu":s=this.Reg[t.rs1].value>>>0,i=t.rs2>>>0;this.Reg[t.rd].valuet1;break;case"xori":this.Reg[t.rd].value=this.Reg[t.rs1].value^a;break;case"srl":this.Reg[t.rd].value=this.Reg[t.rs1].value>>>t.rs2;break;case"sra":this.Reg[t.rd].value=this.Reg[t.rs1].value>>t.rs2;break;case"or":this.Reg[t.rd].value=this.Reg[t.rs1].value|a;break;case"and":this.Reg[t.rd].value=this.Reg[t.rs1].value&a;break}break;case"l":if(!t.rd)break;a=this.Sext(t.rs2,12);var r=this.Reg[t.rs1].value+a,n=this.StackIndex(r);if(n>65535)return this.Code[e].tag="E",this.Code[e].Message="不支持的地址: "+this.CalcRadix(r,16),!1;switch(this.Stack.length<n+1&&this.Stack.push.apply(this.Stack,Array(n+1-this.Stack.length).fill(0)),t.op){case"lb":for(var c=this.Stack[n].toString(16).split(""),o=["",""],l=0;l<2;l++)o[l]=c[r+l];o=parseInt(o.join(""),16),this.Reg[t.rd].value=this.Sext(o,8);break;case"lh":if(r%2!=0)break;for(c=this.Stack[n].toString(16).split(""),o=["","","",""],l=0;l<4;l++)o[l]=c[r+l];o=parseInt(o.join(""),16),this.Reg[t.rd].value=this.Sext(o,16);break;case"lw":if(r%4!=0)break;this.Reg[t.rd].value=this.Stack[n];break;case"lbu":for(c=this.Stack[n].toString(16).split(""),o=["",""],l=0;l<2;l++)o[l]=c[r+l];o=parseInt(o.join(""),16),this.Reg[rd].value=o;break;case"lhu":if(r%2!=0)break;for(c=this.Stack[n].toString(16).split(""),o=["","","",""],l=0;l<4;l++)o[l]=c[r+l];o=parseInt(o.join(""),16),this.Reg[rd].value=o;break}break;case"s":a=this.Sext(t.rd,12),r=this.Reg[t.rs1].value+a,n=this.StackIndex(r);if(n>65535)return this.Code[e].tag="E",this.Code[e].Message="不支持的地址: "+this.CalcRadix(r,16),!1;switch(this.Stack.length<n+1&&this.Stack.push.apply(this.Stack,Array(1+n-this.Stack.length).fill(0)),t.op){case"sb":for(c=("00"+(this.Reg[t.rs2].value>>>0).toString(16)).slice(-2).split(""),o=("00000000"+(this.Stack[n]>>>0).toString(16)).slice(-8).split(""),l=0;l<2;l++)o[r+l]=c[l];o=o.join(""),this.Stack[n]=parseInt(o,16);break;case"sh":c=("0000"+(this.Reg[t.rs2].value>>>0).toString(16)).slice(-4).split(""),o=("00000000"+(this.Stack[n]>>>0).toString(16)).slice(-8).split("");if(r%2!=0)break;for(l=0;l<4;l++)o[r+l]=c[l];o=o.join(""),this.Stack[n]=parseInt(o,16);break;case"sw":c=("00000000"+(this.Reg[t.rs2].value>>>0).toString(16)).slice(-8);if(r%4!=0)break;this.Stack[n]=parseInt(c,16);break}break;case"b":var h=e+t.rd;switch(t.op){case"beq":t.rs1==t.rs2&&(this.pc=h);break;case"bne":t.rs1!=t.rs2&&(this.pc=h);break;case"blt":t.rs1<t.rs2&&(this.pc=h);break;case"bge":t.rs1>=t.rs2&&(this.pc=h);break;case"bltu":t.rs1>>>0<t.rs2>>>0&&(this.pc=h);break;case"bgeu":t.rs1>>>0>=t.rs2>>>0&&(this.pc=h);break}break}return!0},Step:function(){for(var e in this.MoveFocus(null),this.Code)if("E"==e.tag)return;if(-1==this.pc)return this.pc+=1,void(this.Code[this.pc].run=!0);var t=this.pc,s=this.RunCode(t);if(!s)return this.Code[t].run=!1,void(this.pc=-1);this.Code[t].run=!1,this.pc==t&&(this.pc+=1),this.pc==this.Code.length?this.pc=-1:this.Code[this.pc].run=!0},Run:function(){if(this.MoveFocus(null),"未发现错误;<br>"==this.Output){-1==this.pc&&(this.pc=0);var e=0;this.DoRun=!0;while(this.pc!=this.Code.length){if(e>4095)return console.log(1),this.Code[this.pc].Message="运行超时",this.Code[this.pc].tag="E",this.MoveFocus(this.pc),this.pc=-1,void(this.DoRun=!1);e+=1;var t=this.pc;this.Code[t].run=!0;var s=this.RunCode(this.pc);if(!s)return this.Code[t].run=!1,this.MoveFocus(this.pc),this.pc=-1,void(this.DoRun=!1);this.Code[t].run=!1,this.pc==t&&this.pc++}this.pc-=1,this.MoveFocus(this.pc),this.DoRun=!1}},Debug:function(){if(this.MoveFocus(null),"未发现错误;<br>"==this.Output){-1==this.pc&&(this.pc=0);while(this.pc!=this.Code.length){var e=this.pc;this.Code[e].run=!0;var t=this.RunCode(e);if(!t)return this.Code[e].run=!1,void(this.pc=-1);if(this.Code[e].run=!1,this.pc==e&&this.pc++,this.pc!=this.Code.length&&this.Code[this.pc].breakpoint)return void(this.Code[this.pc].run=!0)}this.pc=-1,this.MoveFocus(this.Code.length-1)}},Reset:function(){for(var e=0;e<this.Code.length;e++)this.Compile(e),this.Code[e].run=!1,this.Code[e].breakpoint=!1;for(var t=0;t<this.Reg.length;t++)switch(this.Reg[t].name){case"sp":this.Reg[t].value=4294967295;break;default:this.Reg[t].value=0;break}for(t=0;t<this.Stack.length;t++)this.Stack[t]=0;for(t=0;t<this.Data.length;t++)this.Data[t]=0},ShowMachine:function(){this.ConsoleModel="machine"},ShowMessage:function(){this.ConsoleModel="message"},Edit:function(){this.ConsoleModel="edit"}},computed:{Output:function(){var e="";switch(this.ConsoleModel){case"message":for(var t=0;t<this.Code.length;t++)switch(this.Code[t].tag){case"E":e+="行"+String(t)+"错误, "+this.Code[t].Message+";<br>";break;case"W":e+="行"+String(t)+"异常, "+this.Code[t].Message+";<br>"}0==e.length&&(e="未发现错误;<br>");break;case"machine":for(t=0;t<this.Code.length;t++)e+=this.CalcRadix(this.Code[t].mc,16)+"<br>";break;case"edit":for(t=0;t<this.Code.length;t++)e+=this.Code[t].or+"<br>"}return e}}};s("943f");ke.render=Oe;var Re=ke,me={name:"App",components:{Main:Re}};s("b2e6");me.render=a;var ye=me,xe=Object(i["b"])(ye);xe.mount("#app")},"943f":function(e,t,s){"use strict";s("45bd")},aa67:function(e,t,s){},b2e6:function(e,t,s){"use strict";s("aa67")}});
//# sourceMappingURL=app.eeb616f5.js.map